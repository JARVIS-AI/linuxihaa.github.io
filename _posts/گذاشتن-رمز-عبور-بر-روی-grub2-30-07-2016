* * *

layout: post            
jdate: 1395-05-08       
user: rmasoumvand            
title: گذاشتن رمز عبور بر روی grub2  
categories:

*   آموزشی

tags:

*   set grub2 password

featured: grub2-password.jpg            
keywords:

*   set grub2 password   

## description: گذاشتن رمز عبور بر روی grub2

اگر خاطرتان باشد در آموزش‌های قبلی نحوه بازیابی کلمه عبور کاربر ریشه را از طریق تغییر دادن پارامترهای بوت کرنل در گراب توضییح دادیم. برای امنیت بیشتر می‌توانیم ایتم های grub2 را توسط رمز عبور محافظت کنیم. در این آموزش به نحوه رمزگذاری دسترسی به گزینه های grub2 خواهیم پرداخت

ابتدا توسط یک ویرایشگر متنی فایل etc/grub.d/40_custom/ را ویرایش می‌کنیم:
```sh
sudo gedit /etc/grub.d/40_custom
```
سپس خطوط زیر را به انتهای آن اضافه می‌کنیم:
```sh
set superusers=”USER”
password USER PASSWORD
```
که در اینجا منظور از USER نام کاربری و PASSWORD رمز عبور انتخابی شما می‌باشد. از آنجایی که در روش فوق رمز عبور کاربر بصورت Clear Text ذخیره می‌شود برای امنیت بیشتر می‌توانیم رمز عبور را رمزگذاری کنیم.

برای این کار بصورت زیر عمل می‌کنیم:

ابتدا می بایست توسط دستور زیر یک کلمه عبور رمزگذاری شده ایجاد کنیم:
```sh
grub-mkpasswd-pbkdf2
```
پس از اجرای دستور فوق از شما رمز عبور مورد نظرتان برای رمزگذاری پرسیده می‌شود و درنهایت نسخه رمزگذاری شده کلمه عبور شما را نمایش می دهد

سپس مجدداً فایل etc/grub.d/40_custom/ را ویرایش نموده و اینبار بجای کلمه عبور Clear Text کلمه عبور رمزگذاری شده را بصورت زیر وارد نمایید:
```sh
password USER grub.pbkdf2 ENCRYPTED PASSWORD
```
که در اینجا منظور از ENCRYPTED PASSWORD کلمه عبور رمزگذاری تولید شده است

سپس فایل etc/grub.d/10_linux/ را با یک ویرایشگر متنی ویرایش می‌کنیم:
```sh
sudo gedit /etc/grub.d/10_linux
```
و عبارت unrestricted-- را انتهای خط زیر اضافه می‌کنیم:
```sh
CLASS="--class gnu-linux --class gnu --class os --unrestricted"
```
سپس برای اعمال تغییرات دستور زیر را وارد می‌کنیم
```sh
update-grub
```
