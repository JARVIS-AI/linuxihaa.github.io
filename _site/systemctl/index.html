<!DOCTYPE HTML>
<html lang="fa">
	<head>
		<title>لینوکسی‌ها - مدیریت سرویس‌ها توسط systemctl</title>
		<meta http-equiv="content-type" content="text/html; charset=utf-8" />
		<link rel="alternate" href="http://linuxihaa.ir" hreflang="fa-IR" />
		<link type="application/atom+xml" rel="alternate" href="http://linuxihaa.ir/feed.xml" title="لینوکسی‌ها">
		<link type="application/xml" rel="sitemap" title="لینوکسی‌ها" href="http://linuxihaa.ir/sitemap.xml" />
		<link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" />
		<meta name="viewport" content="width=device-width, initial-scale=1">
			<!--[if lte IE 8]><script src="/assets/css/ie/html5shiv.js"></script><![endif]-->
		<script src="/assets/js/jquery.min.js"></script>
		<script src="/assets/js/jquery.dropotron.min.js"></script>
		<script src="/assets/js/skel.min.js"></script>
		<script src="/assets/js/skel-layers.min.js"></script>
		<script src="/assets/js/jquery.scrollgress.min.js"></script>
		<script src="/assets/js/init.js?v=2016-07-09:3"></script>
		<noscript>
			<link rel="stylesheet" href="/assets/css/skel.css" />
			<link rel="stylesheet" href="/assets/css/style.css" />
		</noscript>
		<!--[if lte IE 8]><link rel="stylesheet" href="/assets/css/ie/v8.css" /><![endif]-->
		<meta name="robots" content="noodp"/>
		<meta name="description" content="مدیریت سرویس‌ها توسط systemctl"/>
		<meta property="og:site_name" content="لینوکسی‌ها" />
		<link rel="canonical" href="http://linuxihaa.ir/systemctl/" />
		<meta property="og:locale" content="fa_IR" />
		<meta property="og:type" content="article" />
		<meta property="og:title" content="لینوکسی‌ها - مدیریت سرویس‌ها توسط systemctl" />
		<meta property="og:description" content="مدیریت سرویس‌ها توسط systemctl" />
		<meta property="og:url" content="http://linuxihaa.ir/systemctl/" />
		<meta property="article:tag" content="systemctl" />
		<meta property="article:section" content="آموزشی" />
		<meta property="article:published_time" content="2016-08-08 00:00:00 +0000" />
		
		
		<meta property="og:image" content="http://linuxihaa.ir/assets/images/systemctl.jpg" />
		<meta property="og:image:width" content="600" />
		<meta property="og:image:height" content="300" />
	</head>
	
		<body>
			<section id="banner"></section>
	
	<!-- Header -->
	<header id="header" class="alt">
		<div id="logo" ><a href="/"><span>لینوکسی‌ها</span><img src="/logo.png" /></a></div>
		<nav id="nav">
			<ul>
				<li><a href="/">خانه</a></li>
				<li>
					<a href="" class="icon fa-angle-down">دسته‌بندی</a>
					<ul>
						
						<li><a href="/category/خبری/">خبری</a></li>
						
						<li><a href="/category/آموزشی/">آموزشی</a></li>
						
					</ul>
				</li>
				<li><a href="/about/">درباره</a></li>
				<li><a href="/cooperation/">همکاری</a></li>
				<li><a href="/contact/">تماس</a></li>
			</ul>
		</nav>
	</header>

	<!-- Main -->
	<section id="main" class="container">

	<article class="box special">
		<header>
			<h1>مدیریت سرویس‌ها توسط systemctl</h1>
		</header>
		<div class="content"><p>در این مطلب قصد داریم دستورات systemctl را آموزش بدهیم که ابزار اصلی برای کنترل سرویس‌ها و init است. در ادامه نگاهی می‌اندازیم که چگونه سرویس‌ها را مدیریت کنیم و در نهایت وضعیتشان را بررسی کنیم.</p>

<h2 id="section">شروع و متوقف کردن سرویس‌ها</h2>

<p>برای شروع کردن یک سرویس systemd باید از دستور <code class="highlighter-rouge">start</code> 
استفاده کنیم.</p>

<p>اگر شما یک کاربر غیر ریشه هستید لطفا روت شوید و یا قبل از دستور <code class="highlighter-rouge">sudo</code> بگذارید تا دستور با دسترسی ریشه اجرا شود در غیر این صورت ممکن که دستور شما عمل نکند.</p>

<div class="language-sh highlighter-rouge"><pre class="highlight"><code>systemctl start APPLICATION.service
</code></pre>
</div>

<p>توسط این دستور شما می‌توانید سرویس خود را شروع کنید.</p>

<p>برای مثال توسط این دستور میتوانید وب سرور nginx را فعال نمایید (لازم به ذکر است که اگر شما نام سرویسی را که می‌خواهید استفاده کنید را نمی‌دانید، می‌توانید با نوشتن فقط یکی دو حرف اول آن سرویس و سپس زدن دو بار پشت سر هم کلید <code class="highlighter-rouge">TAB</code> نام آن را کامل کنید.).</p>

<div class="language-sh highlighter-rouge"><pre class="highlight"><code>systemctl start nginx.service
</code></pre>
</div>

<p>systemd برای کنترل کردن یک سرویس، به دنبال <code class="highlighter-rouge">*.service</code> (همانطور که می‌دانید ستاره یک <code class="highlighter-rouge">wild card</code> و به معنی هر چیزی است) می‌گردد، بنابر این شما می‌توانید برای راحتی کار به این صورت سرویس‌های خود را مدیریت کنید.</p>

<div class="language-sh highlighter-rouge"><pre class="highlight"><code>systemctl start nginx
</code></pre>
</div>

<p>درصورتی که می‌خواهید سرویسی را که شروع کرده‌اید، متوقف 
کنید می‌توانید به همین شیوه عمل کنید با این تفاوت که به جای <code class="highlighter-rouge">start</code> از <code class="highlighter-rouge">stop</code> استفاده کنید.</p>

<div class="language-sh highlighter-rouge"><pre class="highlight"><code>systemctl stop APPLICATION.service
</code></pre>
</div>

<h2 id="section-1">بارگذاری و راه اندازی مجدد سرویس‌ها</h2>

<p>در صورتی که سرویسی را شروع کردید و اکنون می‌خواهید آن را دوباره راه‌اندازی کنید باید از <code class="highlighter-rouge">restart</code> استفاده کنید.</p>

<div class="language-sh highlighter-rouge"><pre class="highlight"><code>systemctl restart APPLICATION.service
</code></pre>
</div>

<p>و یا اگر می‌خواهید فقط آن را به صورت مجدد بارگذاری نمایید میتوانید از <code class="highlighter-rouge">reload</code> استفاده کنید.</p>

<div class="language-sh highlighter-rouge"><pre class="highlight"><code>systemctl reload APPLICATION.service
</code></pre>
</div>

<p><strong>​نکته:</strong> تفاوت <code class="highlighter-rouge">reload</code> و <code class="highlighter-rouge">restart</code> در این است که <code class="highlighter-rouge">reload</code> فقط فایل کانفیگ ویرایش شده را می‌خواند (و سرویس را مجدد راه‌اندازی نمی‌کند) که عموما بسیار سریع انجام می‌شود. اما اگر می‌خواهید به‌طور کلی یک سرویس را دوباره راه‌اندازی کنید باید از <code class="highlighter-rouge">restart</code> استفاده کنید که عموما زمان بیشتری نسبت به بارگذاری طول می‌کشد. اگر مطمئن نیستید که می‌خواهید از کدام استفاده کنید بهتر است که از <code class="highlighter-rouge">reload-or-restart</code> استفاده کنید که ابتدا فایل کانفیگ ویرایش شده را مجدد بارگذاری می‌کند و در صورت نیاز سرویس مربوطه را مجدد راه اندازی می‌کند.</p>

<div class="language-sh highlighter-rouge"><pre class="highlight"><code>systemctl reload-or-restart APPLICATION.service
</code></pre>
</div>

<h2 id="section-2">فعال و غیر فعال کردن سرویس‌ها</h2>

<p>در صورتی که سرویس مورد نظر خود را توسط <code class="highlighter-rouge">start</code> شروع کرده باشید، با اولین ریبوت همه آنها به تنظیمات خود بازمی‌گردد و ممکن است اصلا بعد از بارگذاری سیستم اجرا نشوند. در صورتی که می‌خواهید systemd سرویس مورد نظر شما را هنگام بوت به صورت خودکار فعال کند باید از enable استفاده کنید. به این صورت.</p>

<div class="language-sh highlighter-rouge"><pre class="highlight"><code>systemctl <span class="nb">enable </span>APPLICATION.service
</code></pre>
</div>

<p>این کار یک لینک از <code class="highlighter-rouge">/etc/systemd/system</code> (و در بعضی سیستم ها <code class="highlighter-rouge">/lib/systemd/system</code>) ایجاد می‌کند در مسیری که systemd در آن به دنیال فایل هایی می‌گردد که باید هنگام بوت آنها را شروع کند. (معمولا در <code class="highlighter-rouge">/etc/systemd/system/some-target.target.wants​_</code>)</p>

<p>اگر می‌خواهید عکس این کار را انجام دهید، یعنی وقتی سیستم بوت شد آن سرویس به طور پیشفرض اجرا نشود باید از <code class="highlighter-rouge">disable</code> استفاده کنید، به این صورت.</p>

<div class="language-sh highlighter-rouge"><pre class="highlight"><code>systemctl disable APPLICATION.service
</code></pre>
</div>

<p>برای مثال درصورتی که می‌خواهید جلوی اجرا شدن خودکار وب سرور nginx را هنگام بوت بگیرید باید به این صورت عمل کنید.</p>

<div class="language-sh highlighter-rouge"><pre class="highlight"><code>systemctl disable nginx.service
</code></pre>
</div>

<h2 id="section-3">وضعیت یک سرویس</h2>

<p>در صورتی که می‌خواهید وضعیت یک سرویس را بررسی کنید (برای مثال مطمئن شوید که سرویس شروع و یا متوقف شده است و یا چند خط اول لاگ را بررسی کنید) میتوانید از <code class="highlighter-rouge">status</code> استفاده نمایید.</p>

<div class="language-sh highlighter-rouge"><pre class="highlight"><code>systemctl status APPLICATION.service
</code></pre>
</div>

<p>برای مثال، در صورتی که وضعیت وب سرور nginx را بررسید کنید با خطوطی شبیه به این مواجه می‌شوید:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>nginx.service - A high performance web server and a reverse proxy server
Loaded: loaded (/usr/lib/systemd/system/nginx.service; enabled; vendor preset: disabled)
Active: active (running) since Tue 2015-01-27 19:41:23 EST; 22h ago Main PID: 495 (nginx)
CGroup: /system.slice/nginx.service
├─495 nginx: master process /usr/bin/nginx -g pid /run/nginx.pid; error_log stderr;
└─496 nginx: worker processJan 27 19:41:23 desktop systemd[1]: Starting A high performance web server and a reverse proxy server...Jan 27 19:41:23 desktop systemd[1]: Started A high performance web server and a reverse proxy server.
</code></pre>
</div>

<p>اگر می‌خواهید مطمئن شوید سرویسی که می‌خواهید شروع یا متوقف شده است (برای مثال در اسکریپت نویسی) می‌توانید از <code class="highlighter-rouge">is-active</code> استفاده کنید.</p>

<div class="language-sh highlighter-rouge"><pre class="highlight"><code>systemctl is-active APPLICATION.service
</code></pre>
</div>

<p>خروجی این دستور در صورتی که سرویس مورد نظر شما شروع شده باشد <code class="highlighter-rouge">active</code> خواهد بود و در غیر این صورت <code class="highlighter-rouge">inactive</code>.</p>

<p>و به همین ترتیب، اگر می‌خواهید مطمئن شوید که سرویس شما فعال است یا غیر فعال (الان شما دیگه می‌دونید که فرق غیر فعال با متوقف چیه :) ) می‌توانید از <code class="highlighter-rouge">is-enabled</code> استفاده کنید.</p>

<div class="language-sh highlighter-rouge"><pre class="highlight"><code>systemctl is-enabled APPLICATION.service
</code></pre>
</div>

<p>خروجی این دستور هم در صورت فعال بودن <code class="highlighter-rouge">enable</code> و در صورت غیر فعال بودن <code class="highlighter-rouge">disable</code> خواهد بود.</p>

<p>منبع با اندکی تغییر:
<a href="https://www.digitalocean.com/community/tutorials/how-to-use-systemctl-to-manage-systemd-services-and-units">How To Use Systemctl to Manage Systemd Services and Units</a></p>
</div>
		<footer class="meta">
<!-- AddToAny BEGIN -->
<div class="a2a_kit a2a_kit_size_32 a2a_default_style">
<a class="a2a_dd" href="https://www.addtoany.com/share"></a>
<a class="a2a_button_facebook"></a>
<a class="a2a_button_twitter"></a>
<a class="a2a_button_google_plus"></a>
</div>
<script async src="https://static.addtoany.com/menu/page.js"></script>
<!-- AddToAny END -->
			
			
			
			<span>نوشته شده توسط </span><address class="author"><a href="http://hotspotchi.ir/?page_id=824" class="author" rel="author" target="_blank" title="فربد هستم که همه جا آی‌دیم farbodgame هستش! خودمم هنوز نمیدونم چرا این یوزرنیم رو ۴ سال پیش انتخاب کردم :) دوستدار آزادی و گیتار.">فربد احمدیان</a></address><span>، </span>
			
			
			
			<time class="date" pubdate datetime="2016-08-08T00:00:00+00:00">دوشنبه 18 مرداد 1395</time>
			</span>
			<ul class="tags">
				<span>دسته </span><a href="/category/آموزشی" class="category">آموزشی</a><span>، </span>
				<span>برچسب</span>
				
				<li><a href="/tag/پیکربندی" class="tag">پیکربندی</a><span>،</span></li>
				
			</ul>
			<div class="adv">
				
					
					
						
						<a href="mailto:farbodahmadian2014@gmail.com" target="_blank"><img src="/adv.png" alt="advertise" /></a>
						
					
					
				
			</div>
		</footer>
	</article>
	<div id="disqus_thread"></div>
<script>
    (function() {
        var d = document, s = d.createElement('script');
        
        s.src = 'https://linuxihaa.disqus.com/embed.js';
        
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>لطفاً برای مشاهده نظرات جاوااسکریپت را روشن کنید <a href="https://disqus.com/?ref_noscript" rel="nofollow">Powered by Disqus.</a></noscript>
		</section>
		<!-- Footer -->
			<footer id="footer">
				<span>برچسب‌ها</span>
				<ul class="tags container">
					
					<li>
						<a href="/tag/پراکسی/" title="1 مطلب" style="font-size: 1.0133333333333334em;">پراکسی</a>
					</li>
					
					<li>
						<a href="/tag/اوبونتو/" title="30 مطلب" style="font-size: 1.4733333333333334em;">اوبونتو</a>
					</li>
					
					<li>
						<a href="/tag/dns/" title="1 مطلب" style="font-size: 1.0133333333333334em;">dns</a>
					</li>
					
					<li>
						<a href="/tag/شخصی‌سازی/" title="6 مطلب" style="font-size: 1.0933333333333333em;">شخصی‌سازی</a>
					</li>
					
					<li>
						<a href="/tag/سرور/" title="9 مطلب" style="font-size: 1.14em;">سرور</a>
					</li>
					
					<li>
						<a href="/tag/دبیان/" title="10 مطلب" style="font-size: 1.1533333333333333em;">دبیان</a>
					</li>
					
					<li>
						<a href="/tag/اوبونتو استدیو/" title="1 مطلب" style="font-size: 1.0133333333333334em;">اوبونتو استدیو</a>
					</li>
					
					<li>
						<a href="/tag/کوبونتو/" title="1 مطلب" style="font-size: 1.0133333333333334em;">کوبونتو</a>
					</li>
					
					<li>
						<a href="/tag/زوبونتو/" title="1 مطلب" style="font-size: 1.0133333333333334em;">زوبونتو</a>
					</li>
					
					<li>
						<a href="/tag/اوبونتو کایلین/" title="1 مطلب" style="font-size: 1.0133333333333334em;">اوبونتو کایلین</a>
					</li>
					
					<li>
						<a href="/tag/لوبونتو/" title="2 مطلب" style="font-size: 1.0266666666666666em;">لوبونتو</a>
					</li>
					
					<li>
						<a href="/tag/اوبونتو گنوم/" title="1 مطلب" style="font-size: 1.0133333333333334em;">اوبونتو گنوم</a>
					</li>
					
					<li>
						<a href="/tag/فدورا/" title="10 مطلب" style="font-size: 1.1533333333333333em;">فدورا</a>
					</li>
					
					<li>
						<a href="/tag/ترمینال/" title="5 مطلب" style="font-size: 1.0733333333333333em;">ترمینال</a>
					</li>
					
					<li>
						<a href="/tag/میزکار/" title="6 مطلب" style="font-size: 1.0933333333333333em;">میزکار</a>
					</li>
					
					<li>
						<a href="/tag/گنوم/" title="3 مطلب" style="font-size: 1.0466666666666666em;">گنوم</a>
					</li>
					
					<li>
						<a href="/tag/یونیتی/" title="2 مطلب" style="font-size: 1.0266666666666666em;">یونیتی</a>
					</li>
					
					<li>
						<a href="/tag/سینامون/" title="2 مطلب" style="font-size: 1.0266666666666666em;">سینامون</a>
					</li>
					
					<li>
						<a href="/tag/kde/" title="2 مطلب" style="font-size: 1.0266666666666666em;">kde</a>
					</li>
					
					<li>
						<a href="/tag/xfce/" title="1 مطلب" style="font-size: 1.0133333333333334em;">xfce</a>
					</li>
					
					<li>
						<a href="/tag/lxde/" title="1 مطلب" style="font-size: 1.0133333333333334em;">lxde</a>
					</li>
					
					<li>
						<a href="/tag/ردهت/" title="7 مطلب" style="font-size: 1.1066666666666667em;">ردهت</a>
					</li>
					
					<li>
						<a href="/tag/centos/" title="6 مطلب" style="font-size: 1.0933333333333333em;">centos</a>
					</li>
					
					<li>
						<a href="/tag/نرم‌افزار/" title="21 مطلب" style="font-size: 1.3333333333333333em;">نرم‌افزار</a>
					</li>
					
					<li>
						<a href="/tag/آرچ‌لینوکس/" title="3 مطلب" style="font-size: 1.0466666666666666em;">آرچ‌لینوکس</a>
					</li>
					
					<li>
						<a href="/tag/اوپن‌سوزه/" title="9 مطلب" style="font-size: 1.14em;">اوپن‌سوزه</a>
					</li>
					
					<li>
						<a href="/tag/پیکربندی/" title="16 مطلب" style="font-size: 1.2533333333333334em;">پیکربندی</a>
					</li>
					
					<li>
						<a href="/tag/مرورگر/" title="2 مطلب" style="font-size: 1.0266666666666666em;">مرورگر</a>
					</li>
					
					<li>
						<a href="/tag/لینوکس مینت/" title="7 مطلب" style="font-size: 1.1066666666666667em;">لینوکس مینت</a>
					</li>
					
					<li>
						<a href="/tag/توسعه/" title="3 مطلب" style="font-size: 1.0466666666666666em;">توسعه</a>
					</li>
					
					<li>
						<a href="/tag/شبکه/" title="5 مطلب" style="font-size: 1.0733333333333333em;">شبکه</a>
					</li>
					
					<li>
						<a href="/tag/مگیا/" title="1 مطلب" style="font-size: 1.0133333333333334em;">مگیا</a>
					</li>
					
					<li>
						<a href="/tag/حریم‌شخصی/" title="5 مطلب" style="font-size: 1.0733333333333333em;">حریم‌شخصی</a>
					</li>
					
					<li>
						<a href="/tag/کتاب/" title="1 مطلب" style="font-size: 1.0133333333333334em;">کتاب</a>
					</li>
					
					<li>
						<a href="/tag/بوت‌لودر/" title="1 مطلب" style="font-size: 1.0133333333333334em;">بوت‌لودر</a>
					</li>
					
					<li>
						<a href="/tag/توزیع/" title="1 مطلب" style="font-size: 1.0133333333333334em;">توزیع</a>
					</li>
					
					<li>
						<a href="/tag/sudo/" title="2 مطلب" style="font-size: 1.0266666666666666em;">sudo</a>
					</li>
					
					<li>
						<a href="/tag/کالی لینوکس/" title="1 مطلب" style="font-size: 1.0133333333333334em;">کالی لینوکس</a>
					</li>
					
					<li>
						<a href="/tag/nixos/" title="1 مطلب" style="font-size: 1.0133333333333334em;">nixos</a>
					</li>
					
					<li>
						<a href="/tag/مدیربسته/" title="1 مطلب" style="font-size: 1.0133333333333334em;">مدیربسته</a>
					</li>
					
					<li>
						<a href="/tag/رسپبری‌پای/" title="1 مطلب" style="font-size: 1.0133333333333334em;">رسپبری‌پای</a>
					</li>
					
					<li>
						<a href="/tag/اندروید/" title="1 مطلب" style="font-size: 1.0133333333333334em;">اندروید</a>
					</li>
					
				</ul>
				<ul class="icons">
					<li><a href="http://facebook.com/linuxihaa" class="icon genericon genericon-facebook" target="_blank">Facebook</a></li>
					<li><a href="https://twitter.com/linuxihaa" class="icon genericon genericon-twitter" target="_blank">Twitter</a></li>
					<li><a href="https://telegram.me/linuxiha" class="icon genericon genericon-telegram" target="_blank">Telegram</a></li>
					<li><a href="https://www.instagram.com/linuxiha" class="icon genericon genericon-instagram" target="_blank">Instagram</a></li>
					<li><a href="https://plus.google.com/109502803142394425024/posts" class="icon genericon genericon-googleplus" target="_blank">Google+</a></li>
					<li><a href="http://www.youtube.com/channel/UCM8_p07cthYziOA96HDdzOg" class="icon genericon genericon-youtube" target="_blank">YouTube</a></li>
					<li><a href="https://github.com/linuxihaa" class="icon genericon genericon-github" target="_blank">Github</a></li>
					<li><a href="/feed.xml" class="icon genericon genericon-feed" target="_blank">RSS Feed</a></li>
				</ul>
				<ul class="copyright">
					<li>&copy; حق نشر ۱۳۹۵-۱۳۹۲ <a href="">لینوکسی‌ها</a>، <a href="/version-history/">نسخه‌ی ۲.۰</a>، تحت مجوز <a href="http://creativecommons.org/licenses/by-nc-nd/3.0/">کرتیو کامنز ۳.۰</a></li>
					<li> پوسته برگرفته از <a href="https://github.com/CloudCannon/Alpha-Jekyll-Theme">Alpha Jekyll Theme</a></li>
				</ul>
			</footer>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-44951909-1', 'auto');
  ga('send', 'pageview');

</script>
	</body>
</html>

